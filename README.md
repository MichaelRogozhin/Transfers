# Transfers
Transfers of peoples - test exercise

Используется:
Python 3.7.6
Django 2.2.11
PostgreSQL 11.6


Создание виртуального окружения
python -m venv env

Активация виртуального окружения
env\scripts\activate.bat

Установка пакетов
pip install -r requirements.txt


В Postgres необходимо создать пользователя transfersuser с паролем 123456, и базу данных transfersdb с владельцем transfersuser.
Данные для подключения к БД в прокте находятся в файле Transfers/options.py

Затем провести миграции или восстановить бекап базы данных из файла _db/transfersdb.backup или _db/transfersdb.sql

В соответствии с заданием созданы следующие API-методы (POST-запросы):

Register
входные парамтеры: balance, currency, email, password
возвращает: {"result": string}

Authenticate
входные парамтеры: email, password
возвращает: {"result": string, "token": string}

Transfer
входные парамтеры: email, token, amount
возвращает: {"result": string}

GetOperations
входные парамтеры: email, token
возвращает:
{"result": string, "operations":  [
    {
      "account_source": string,
      "currency_source": string,
      "amount_source": float,
      "account_dest": string,
      "currency_dest": string,
      "amount_dest": float
    }, ...
  ]
}

Система авторизации пользователей сделана следующим образом. Она не использует стандартные возможности Django и DRF (такое решение было принято
в начале разработки, затем не стал его менять).
Пользователи сохраняются в модель Client. Там хранятся логин (email), пароль и сгенерированный токен.
Метод Authenticate используется для аутентификации пользователя - по логину и паролю он возвращает токен, который  исползуется для
аутенификации в оставшихся методах - Transfer и GetOperations.

Проверка получаемых методами параметров по большей части реализована - проверяется наличие всех параметров в каждом методе,
но, например, типы параметров не проверяются.

Для запуска проекта development-сервером Django под Windows можно воспользоваться файлом
cmd_run.cmd
Для установки пакетов
cmd_shell.cmd (активация виртуального окружения)

В папке _curl находятся cmd-файлы для проверки API-методов с помощью curl.
Важно! Так как токены при создании пользователя генерируются каждый раз новые, то во входных параметрах для методов
Transfer (файл Transfer_in_X.json) и GetOperations (файл GetOperations_in.json) нужно их менять. Взять их можно из резултатов
выполнения метода Authenticate (файл Authenticate_out.json).


Для обновления курсов валют используются данные с ресурса exchangeratesapi.io.
Для обновления запускается отдельный поток в котором в бесконечном цикле с паузой в 3 минуты запускается скачивание данных.
В процедуре проверяются все имеющиеся в системе валюты на их наличие в данных с ресурса и если они найдены, то обновляются.
С помющью print-а выводится информация о валютах, чей курс был обновлен. За базовую валюту принят Евро, поэтому курс EUR всегда равен 1.
Каких-то особых проверок на ошибки делать не стал, так как этого нет в задании.

Unit-тесты не стал писать, так как на практике их не использовал. Но что это такое знаю, при необходимости начну использовать.